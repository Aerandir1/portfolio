/* =========================
   Variables & reset
========================= */
:root { --bg:#f6f9fc; --surface:#ffffff; --text:#14202b; --muted:#5a6b7a; --accent:#0097a7; --radius:14px; --shadow:0 6px 22px rgba(16,24,40,0.08); --maxw:1040px; }
*{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:Inter,system-ui,-apple-system,Seg ui UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text);line-height:1.6}
img{max-width:100%;display:block}

/* ========================= Header */
.site-header{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:12px 24px;background:rgba(255,255,255,0.55);backdrop-filter:blur(10px) saturate(1.2);-webkit-backdrop-filter:blur(10px) saturate(1.2);border-bottom:1px solid rgba(16,24,40,0.08);box-shadow:none;position:sticky;top:0;z-index:999}
.site-brand{display:flex;align-items:center;gap:16px}
.site-brand{flex:1 1 auto;min-width:0}
.main-nav{margin-left:auto}
.logo img{width:96px;height:96px;border-radius:16px;object-fit:cover;box-shadow:0 4px 12px rgba(0,0,0,.08)}
.brand-name{font-size:2.2rem;font-weight:900;color:var(--accent);letter-spacing:-.02em}
.brand-sub{color:var(--muted);font-size:1.25rem;margin-top:4px}
.main-nav ul{list-style:none;display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.main-nav a{text-decoration:none;color:var(--text);font-weight:600;padding:8px 12px;border-radius:10px;font-size:1.05rem;transition:background .18s;white-space:nowrap}
.main-nav a:hover,.main-nav a.active{background:rgba(0,151,167,.12);color:var(--accent)}
#darkToggle{position:relative;right:auto;top:auto;transform:none;width:48px;height:48px;border-radius:24px;background:#ffffff;color:#333;border:1px solid rgba(16,24,40,.10);box-shadow:0 2px 8px rgba(0,0,0,.08);cursor:pointer;z-index:1;font-size:1.3rem;transition:background .2s,transform .15s}
#darkToggle:hover{transform:scale(1.05)}
body.dark #darkToggle{background:#161f28;color:#fff;border-color:rgba(255,255,255,.10)}
.nav-toggle{display:none;border:none;background:transparent;font-size:22px;cursor:pointer}
/* Prevent header brand and nav from colliding at high zoom */
.site-brand{min-width:0}
.main-nav{flex:1 1 auto}
/* Header controls: dark mode + language */
.header-controls{display:flex;align-items:center;gap:4px;flex-wrap:nowrap;margin-left:auto;margin-right:12px;padding:0;border-radius:0;background:transparent;border:none;box-shadow:none}
.header-lang{display:inline-flex}
/* Language switcher chips next to dark mode */
.lang-switch{display:inline-flex;align-items:center;gap:6px;font-weight:800;color:var(--muted);padding:0;border-radius:999px;background:transparent;border:none}
.lang-switch .lang{padding:6px 12px;border-radius:999px;font-size:0.95rem;color:var(--text);text-decoration:none;border:none;line-height:1}
.lang-switch .lang:hover{background:rgba(0,151,167,.10);color:var(--accent)}
.lang-switch .lang.current{background:rgba(0,151,167,.16);color:var(--accent)}
.lang-switch .sep{color:var(--muted);padding:0 2px}
body.dark .lang-switch{background:transparent;border:none}
body.dark .lang-switch .lang{color:#e6eef9;border:none}
body.dark .lang-switch .lang:hover{background:rgba(127,216,255,.16);color:#7fd8ff}
body.dark .lang-switch .lang.current{background:rgba(127,216,255,.22);color:#7fd8ff}
.header-controls #darkToggle{margin-left:0}
.header-controls .lang-switch{margin-left:0}
body.dark .header-controls{background:transparent;border:none}
.header-lang{margin-left:0}
@media(max-width:820px){
   .main-nav{display:none;position:absolute;right:8px;top:56px;background:var(--surface);padding:10px;border-radius:10px;box-shadow:var(--shadow);width:min(92vw,360px)}
   .main-nav ul{flex-direction:column;gap:8px}
   body.nav-open .main-nav{display:block}
   .nav-toggle{display:block}
   /* Keep language toggle near dark toggle; avoid fixed positioning */
   .header-controls{gap:4px;margin-right:8px}
}

/* Mobile fixed dark toggle clone */
#darkToggleMobile{display:none}
@media(max-width:820px){
   #darkToggle{display:none}
   #darkToggleMobile{display:inline-flex;align-items:center;justify-content:center;position:fixed;right:12px;top:12px;width:44px;height:44px;border-radius:22px;background:#ffffff;color:#333;border:1px solid rgba(16,24,40,.10);box-shadow:0 2px 8px rgba(0,0,0,.08);z-index:1000;font-size:1.2rem}
   body.dark #darkToggleMobile{background:#161f28;color:#fff;border-color:rgba(255,255,255,.10)}
}
/* Desktop: pin dark toggle to top-right */
@media(min-width:821px){
   #darkToggle{position:fixed;right:12px;top:12px;z-index:1001}
}

/* ========================= Layout */
main{max-width:var(--maxw);margin:0 auto;padding:32px 24px 80px}
section{margin:48px 0; scroll-margin-top: 108px;}
section h2{font-size:2.2rem;margin-bottom:24px;display:flex;align-items:center;justify-content:flex-start;gap:10px;cursor:pointer;position:relative;
   padding:12px 16px;
   background:rgba(255,255,255,0.8);
   border:1px solid rgba(16,24,40,.10);
   border-radius:12px;
   box-shadow:0 4px 12px rgba(16,24,40,.06);
}
/* Chevron before section titles */
section h2::before{
   content:"\25B6"; /* ▶ */
   display:inline-block;
   margin-right:4px;
   color:var(--muted);
   font-size:1.2rem;
   transform:rotate(0deg); /* pointing right by default */
   transition:transform .25s ease, color .2s ease;
}
section:not(.collapsed) h2::before{
   transform:rotate(90deg); /* pointing down when expanded */
}
body.dark section h2::before{ color:#9fb3c8; }
body.dark section h2{
   background:rgba(18,26,34,0.85);
   border-color:rgba(255,255,255,.08);
   box-shadow:none;
}

/* ========================= Collapsible sections (simple) */
.about .about-content,
.projects .projects-grid,
.diplomas .diplomas-grid,
.experiences .experiences-grid,
.skills .skills-grid,
.contact .contact-grid{overflow:hidden;transition:max-height .35s ease;max-height:5000px}
.about.collapsed .about-content{max-height:0}
.projects.collapsed .projects-grid{max-height:0}
.diplomas.collapsed .diplomas-grid{max-height:0}
.experiences.collapsed .experiences-grid{max-height:0}
.skills.collapsed .skills-grid{max-height:0}
.contact.collapsed .contact-grid{max-height:0}

/* Disable initial animations to avoid flicker on load */
body.no-anim .about .about-content,
body.no-anim .projects .projects-grid,
body.no-anim .diplomas .diplomas-grid,
body.no-anim .experiences .experiences-grid,
body.no-anim .skills .skills-grid,
body.no-anim .contact .contact-grid{transition:none}

/* Reduce gaps when sections are collapsed */
.about.collapsed,
.projects.collapsed,
.experiences.collapsed,
.diplomas.collapsed,
.skills.collapsed,
.contact.collapsed{margin:16px 0}
.about.collapsed h2,
.projects.collapsed h2,
.experiences.collapsed h2,
.diplomas.collapsed h2,
.skills.collapsed h2,
.contact.collapsed h2{margin-bottom:8px}

/* About section content styling */
.about .about-content p{color:var(--muted);font-size:1.15rem;line-height:1.8;text-align:justify}
body.dark .about .about-content p{color:#ffffff}
/* CV download button */
.cv-btn{display:inline-flex;align-items:center;gap:10px;padding:10px 16px;border-radius:12px;border:1px solid rgba(0,151,167,.35);background:rgba(0,151,167,.12);color:var(--accent);font-weight:800;font-size:1rem;cursor:pointer;text-decoration:none;transition:transform .12s ease,box-shadow .18s ease,background .18s ease}
.cv-btn::before{content:"⬇";display:inline-block;font-size:1.1rem}
.cv-btn:hover{transform:translateY(-1px);box-shadow:0 8px 18px rgba(16,24,40,.14);background:rgba(0,151,167,.18)}
.cv-btn:active{transform:translateY(0);box-shadow:none}
body.dark .cv-btn{border-color:rgba(127,216,255,.40);background:rgba(127,216,255,.16);color:#7fd8ff}
body.dark .cv-btn:hover{background:rgba(127,216,255,.22)}

/* ========================= Projects */
.projects-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:24px}
.project-card{background:var(--surface);border-radius:var(--radius);box-shadow:var(--shadow);padding:28px;border:1px solid rgba(16,24,40,.06);transition:transform .18s,box-shadow .18s,border-color .18s;cursor:pointer;user-select:none}
.project-card{position:relative}
/* Inline affordance: + to enlarge, − when enlarged */
.project-card::after{
   content:"+";
   position:absolute; right:12px; bottom:12px; pointer-events:none;
   width:28px; height:28px; border-radius:14px;
   display:flex; align-items:center; justify-content:center;
   font-weight:800; font-size:1.1rem; line-height:1;
   background:rgba(0,0,0,.06); color:#0d1b24;
   border:1px solid rgba(16,24,40,.12);
}
body.dark .project-card::after{ background:rgba(255,255,255,.08); color:#e6eef9; border-color:rgba(255,255,255,.18); }
.project-card.fullscreen::after{ content:"−"; }
.project-card:hover{transform:translateY(-4px);box-shadow:0 10px 28px rgba(16,24,40,.12);border-color:rgba(0,151,167,.35)}
.project-card h3{font-size:1.6rem;color:var(--accent);margin-bottom:12px}
.project-card p{color:var(--muted);font-size:1.15rem;line-height:1.7;text-align:justify;text-justify:inter-word}
.project-card .details{margin-top:16px;display:none}
.project-card.fullscreen .details{display:block}
/* Default image style (can be hidden when not opened) */
.project-card img{border-radius:12px;margin-top:16px;box-shadow:0 4px 16px rgba(16,24,40,.08);width:100%;height:auto;max-width:100%;object-fit:contain}
/* Hide illustration by default; show when opened (fullscreen) */
.project-card .project-image-block{display:none}
.project-card.fullscreen .project-image-block{display:block}
/* Move image to the top and remove any frame when opened */
.project-card.fullscreen .project-structure{display:flex;flex-direction:column}
.project-card.fullscreen .project-image-block{order:-1;margin-bottom:16px}
.project-card.fullscreen .project-image-block img{border-radius:0;box-shadow:none;width:100%;max-width:100%;height:auto;max-height:70vh;object-fit:contain;margin:0 auto;display:block}
/* Fullscreen layout reverted: image on top, content below */
.project-card.fullscreen .project-structure{display:flex;flex-direction:column}
.project-card.fullscreen .project-image-block{order:-1;margin-bottom:16px}
.project-card.fullscreen .project-image-block img{border-radius:0;box-shadow:none;width:auto;max-width:400px;height:auto;margin:0 auto;display:block}

/* Fullscreen project inside projects section */
.projects.projects-full { position: relative; }
.projects.projects-full .projects-grid { display:block; }
.project-card.fullscreen { 
   position: relative;
   width: 100%;
   max-width: none;
   border-radius: 18px;
   padding: 36px;
   box-shadow: 0 16px 36px rgba(16,24,40,.18);
   user-select:text;
}
.projects.projects-full .projects-grid > .project-card:not(.fullscreen) { display: none; }
.project-close { 
   position: absolute; 
   top: 14px; right: 16px; 
   width: 44px; height: 44px; 
   border-radius: 50%; 
   border: 1px solid rgba(16,24,40,.12);
   background: var(--surface);
   color: var(--muted);
   box-shadow: 0 4px 14px rgba(16,24,40,.10);
   font-size: 1.4rem; 
   cursor: pointer;
   display: inline-flex;
   align-items: center;
   justify-content: center;
   line-height: 1;
   padding: 0;
}
.project-close:hover { color: var(--accent); }

/* Project tech labels spacing */
.project-techs{display:flex;flex-wrap:wrap;gap:8px;margin-top:16px;margin-bottom:6px}
.project-techs span{background:rgba(0,151,167,.12);color:var(--accent);border:1px solid rgba(0,151,167,.25);border-radius:999px;padding:6px 10px;font-weight:600;font-size:0.95rem}
body.dark .project-techs span{background:rgba(127,216,255,.18);color:#7fd8ff;border-color:rgba(127,216,255,.25)}

/* ========================= Open simulation button (project 1) */
.open-sim-btn{
   display:inline-flex;align-items:center;gap:10px;
   padding:10px 16px;
   border-radius:14px; /* custom radius */
   border:1px solid #ffb870; /* warmer accent border */
   background:#ffe9cc; /* softer warm background */
   color:#d96b00; /* text color for contrast */
   font-weight:800;
   font-size:1rem;
   cursor:pointer;
   transition:transform .12s ease, box-shadow .18s ease, background .18s ease;
}
.open-sim-btn::before{
   content:"▶"; /* play icon */
   display:inline-block;
   font-size:1.1rem;
}
.open-sim-btn:hover{
   transform:translateY(-1px);
   box-shadow:0 8px 18px rgba(16,24,40,.14);
   background:#ffdfb3;
}
.open-sim-btn:active{ transform:translateY(0); box-shadow:none; }
body.dark .open-sim-btn{
   border-color:#ffcc8a;
   background:#4a3118; /* dark warm */
   color:#ffd9a6;
}
body.dark .open-sim-btn:hover{ background:#593b1f; }

/* Spacing between technologies and action button */
.project-actions{ margin-top: 12px; }

/* ========================= Timelines */
.diplomas-grid,.experiences-grid{position:relative;border-left:4px solid #2b3440;padding-left:28px}
.diploma,.experience{position:relative;background:var(--surface);border-radius:var(--radius);box-shadow:var(--shadow);padding:20px 24px;margin-bottom:20px;transition:transform .18s,box-shadow .18s}
.diploma:hover,.experience:hover{transform:translateY(-2px);box-shadow:0 10px 28px rgba(16,24,40,.12)}
.diploma::before,.experience::before{content:"";position:absolute;left:-16px;top:20px;width:16px;height:16px;background:var(--accent);border:4px solid #fff;border-radius:50%;box-shadow:0 2px 8px rgba(16,24,40,.10)}
.diploma h3,.experience h3{font-size:1.4rem;color:var(--accent);margin-bottom:8px}
.diploma .meta,.experience .meta{color:var(--muted);font-size:1.05rem;margin-bottom:8px}
.diploma p,.experience p{color:var(--text);font-size:1.1rem;line-height:1.7}
/* Ensure detailed description blocks are justified */
.project-desc{ text-align: justify; text-justify: inter-word; }

/* Item skills chips (diplomas/experiences) */
.item-skills{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
.item-skills .skill-chip{
   padding:7px 12px;
   border-radius:999px;
   border:1px solid rgba(0,151,167,.28);
   background:linear-gradient(135deg, rgba(0,151,167,.16), rgba(0,151,167,.08));
   color:var(--accent);
   font-weight:700;
   font-size:0.94rem;
   letter-spacing:0.01em;
   box-shadow:0 4px 12px rgba(16,24,40,0.10);
   transition:transform .15s ease, box-shadow .18s ease;
}
.item-skills .skill-chip:hover{transform:translateY(-1px);box-shadow:0 8px 18px rgba(16,24,40,0.16)}
body.dark .item-skills .skill-chip{
   border-color:rgba(127,216,255,.32);
   background:linear-gradient(135deg, rgba(127,216,255,.20), rgba(127,216,255,.12));
   color:#7fd8ff;
   box-shadow:none;
}

/* ========================= Skills (Compétences) */
.skills{
   /* same width/alignment as other sections inside main */
   position:static;
   left:auto; right:auto;
   margin-left:0; margin-right:0;
   padding:0;
}
.skills h2{ /* match other sections' title style */
   cursor:pointer;
}
.skills-inner{width:100%;max-width:none;margin:0}
.skills-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px;margin-top:20px}
.skill-group{
   background:var(--surface);
   border-radius:var(--radius);
   border:1px solid rgba(16,24,40,.08);
   box-shadow:var(--shadow);
   padding:16px 18px;
   position:relative;
}
.skill-group-header{
   display:flex;align-items:center;gap:10px;
   font-weight:800;letter-spacing:.2px;
   color:var(--text);
   margin-bottom:12px;
}
/* Dark mode: make skill category titles pop */
body.dark .skill-group-header{ color:#7fd8ff; }
.skill-accent-dot{width:12px;height:12px;border-radius:50%;background:var(--accent,#0097a7);box-shadow:0 0 0 4px color-mix(in oklab, var(--accent,#0097a7) 20%, transparent)}
.skill-chips{display:flex;flex-wrap:wrap;gap:10px}
.chip{
   padding:8px 12px;border-radius:999px;font-weight:600;font-size:0.98rem;
   border:1px solid color-mix(in oklab, var(--accent,#0097a7) 55%, transparent);
   background: color-mix(in oklab, var(--accent,#0097a7) 12%, transparent);
   color: #0d1b24;
}
body.dark .chip{color:#e6eef9;border-color:color-mix(in oklab, var(--accent,#7fd8ff) 55%, transparent);background:color-mix(in oklab, var(--accent,#7fd8ff) 18%, transparent)}
body.dark .skill-group{background:#121a22;border-color:rgba(255,255,255,.06);box-shadow:none}
.skill-subblock{margin-top:6px}
.skill-subtitle{font-weight:700;color:var(--muted);margin-bottom:6px;font-size:0.95rem}
.skill-note{color:var(--muted);font-size:0.95rem;margin-top:10px}

/* ========================= Contact */
.contact .contact-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}
.contact-card{display:flex;align-items:center;gap:12px;background:var(--surface);border-radius:var(--radius);border:1px solid rgba(16,24,40,.08);box-shadow:var(--shadow);padding:14px 16px;color:var(--text);text-decoration:none;transition:transform .18s,box-shadow .18s,border-color .18s}
.contact-card:hover{transform:translateY(-2px);box-shadow:0 10px 28px rgba(16,24,40,.12);border-color:rgba(0,151,167,.35)}
.contact-ico{font-size:1.35rem;width:28px;text-align:center}
.contact-card .muted{color:var(--muted);font-size:.95rem}
body.dark .contact-card{background:#121a22;color:#e6eef9;border:1px solid rgba(255,255,255,.06);box-shadow:none}
body.dark .contact-card .muted{color:#ffffff}

/* ========================= Dark mode */
body.dark{background:#0b0f14;color:#e6eef9}
body.dark .site-header{background:rgba(15,23,32,0.6);backdrop-filter:blur(10px) saturate(1.2);-webkit-backdrop-filter:blur(10px) saturate(1.2);border-bottom:1px solid rgba(255,255,255,0.08)}
body.dark .brand-name{color:#7fd8ff}
body.dark .main-nav a{color:#e6eef9}
body.dark .main-nav a:hover,body.dark .main-nav a.active{background:rgba(127,216,255,.18);color:#7fd8ff}
body.dark .project-card,body.dark .diploma,body.dark .experience{background:#121a22;color:#e6eef9;box-shadow:none;border:1px solid rgba(255,255,255,.06)}
/* Make description text white in dark mode */
body.dark .project-card p,
body.dark .diploma p,
body.dark .experience p{color:#ffffff}
body.dark .diplomas-grid,body.dark .experiences-grid{border-left-color:rgba(255,255,255,.10)}
body.dark .diploma::before,body.dark .experience::before{background:#7fd8ff;border-color:#0b0f14}

/* ========================= Modal (Gravity Sim) */
.sim-modal{position:fixed;inset:0;background:rgba(16,24,40,.35);display:none;align-items:center;justify-content:center;z-index:1000}
.sim-modal.open{background:rgba(16,24,40,.5)}
.sim-modal-content{background:var(--surface);border-radius:18px;box-shadow:0 10px 36px rgba(0,0,0,.25);padding:20px;max-width:1100px;width:95vw;max-height:90vh;display:flex;flex-direction:column;gap:12px;position:relative}
.sim-modal-content h2{font-size:1.4rem;color:var(--accent)}
.sim-modal-content iframe{width:100%;height:620px;border:none;border-radius:12px;background:#fff}
.sim-modal-close{position:absolute;top:10px;right:12px;font-size:2rem;background:none;border:none;color:var(--muted);cursor:pointer}
.sim-modal-close:hover{color:var(--accent)}

/* ========================= Responsive */
@media(max-width:600px){
   .site-header{padding:10px 16px;gap:12px;position:relative; padding-right:96px}
   .logo img{width:48px;height:48px}
   .brand-name{font-size:1.25rem}
   .brand-sub{display:block;font-size:0.95rem;line-height:1.3; white-space:normal}
   /* Mobile: stack toggles inside header on right, dark above, language below */
   .header-controls{position:absolute;right:12px;top:12px;display:flex;flex-direction:column;gap:8px;background:transparent;border:none;box-shadow:none;padding:0}
   .header-lang{position:static;display:inline-flex;justify-content:flex-end}
   .lang-switch{gap:4px;padding:3px 6px}
   .lang-switch .lang{padding:4px 8px;font-size:0.88rem}
   .lang-switch .sep{display:none}
   .header-controls{padding:2px 4px;gap:4px}
   main{padding:20px 12px 56px}
   /* Reduce anchor offset under smaller header on mobile */
   section{ scroll-margin-top: 80px; }
   section h2{font-size:1.6rem;padding:10px 12px}

   .projects-grid{grid-template-columns:1fr}
   .project-card{padding:18px}
   .project-card h3{font-size:1.3rem}
   .project-card p{font-size:1rem}

   .skills-grid{grid-template-columns:1fr}

   /* Timelines: simplify layout on mobile */
   .diplomas-grid,.experiences-grid{border-left:none;padding-left:0}
   .diploma,.experience{padding:14px 12px;margin-bottom:14px}
   .diploma h3,.experience h3{font-size:1.2rem}
   .diploma .meta,.experience .meta{font-size:0.95rem}
   .diploma p,.experience p{font-size:1rem;line-height:1.6}
   /* Hide timeline dots on mobile to avoid overlap */
   .diploma::before,.experience::before{display:none}

   .sim-modal-content iframe{height:60vh}

   /* Mobile dark toggle: sized for header stack */
   #darkToggleMobile{position:static;width:40px;height:40px}
   #darkToggle{position:static;width:40px;height:40px}
}